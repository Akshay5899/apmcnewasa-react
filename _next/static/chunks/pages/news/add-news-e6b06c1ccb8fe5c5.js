(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75],{262:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news/add-news",function(){return n(2049)}])},2049:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(5893),i=n(9008),r=n.n(i),o=n(1664),l=n.n(o),d=n(7294),c=n(5422),a=n(7927);function p(){let e={color:"#34a853",textDecoration:"none"};return(0,s.jsxs)("section",{style:{background:"#f5f5f5",textAlign:"center",padding:"80px 20px"},children:[(0,s.jsx)("h2",{style:{fontSize:"42px",fontWeight:"700",color:"#000",marginBottom:"10px"},children:"Add News"}),(0,s.jsxs)("div",{style:{fontSize:"18px"},children:[(0,s.jsx)(l(),{href:"/",style:e,children:"Home"})," / ",(0,s.jsx)(l(),{href:"/news",style:e,children:"News"})," / ",(0,s.jsx)("strong",{children:"Add News"})]})]})}function x(){let[e,t]=(0,d.useState)(""),[n,i]=(0,d.useState)(""),[o,x]=(0,d.useState)(""),[u,h]=(0,d.useState)([]),[f,g]=(0,d.useState)(null),y=async()=>{try{let e=await fetch("http://localhost:5000/api/news"),t=await e.json();h(t)}catch(e){console.error(e)}};(0,d.useEffect)(()=>{y()},[]);let w=async s=>{s.preventDefault();try{let s=f?"http://localhost:5000/api/news/".concat(f):"http://localhost:5000/api/news",r=f?"PUT":"POST";(await fetch(s,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e,description:n})})).ok?(x(f?"News updated successfully!":"News added successfully!"),t(""),i(""),g(null),y()):x("Failed to submit news.")}catch(e){console.error(e),x("Error submitting news.")}},j=e=>{t(e.title),i(e.description),g(e.id),window.scrollTo({top:0,behavior:"smooth"})},b=async e=>{if(confirm("Are you sure you want to delete this news?"))try{(await fetch("http://localhost:5000/api/news/".concat(e),{method:"DELETE"})).ok?(x("News deleted successfully!"),y()):x("Failed to delete news.")}catch(e){console.error(e),x("Error deleting news.")}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Add News - APMC"})}),(0,s.jsx)(c.Z,{}),(0,s.jsx)(p,{}),(0,s.jsxs)("main",{style:{maxWidth:"800px",margin:"50px auto",padding:"0 20px"},children:[o&&(0,s.jsx)("p",{style:{textAlign:"center",color:"#34a853"},children:o}),(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{children:"Title"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:"10px",marginTop:"5px"}})]}),(0,s.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,s.jsx)("label",{children:"Description"}),(0,s.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),required:!0,rows:5,style:{width:"100%",padding:"10px",marginTop:"5px"}})]}),(0,s.jsx)("button",{type:"submit",style:{background:"#34a853",color:"#fff",padding:"10px 20px",border:"none",borderRadius:"5px",cursor:"pointer"},children:f?"Update News":"Add News"}),f&&(0,s.jsx)("button",{type:"button",onClick:()=>{t(""),i(""),g(null)},style:{marginLeft:"10px",padding:"10px 20px",border:"1px solid #777",borderRadius:"5px",cursor:"pointer"},children:"Cancel"})]}),(0,s.jsxs)("section",{style:{marginTop:"50px"},children:[(0,s.jsx)("h2",{style:{marginBottom:"20px",fontSize:"24px",fontWeight:"600"},children:"Existing News"}),0===u.length?(0,s.jsx)("p",{style:{color:"#777"},children:"No news available."}):(0,s.jsx)("ul",{style:{listStyle:"none",padding:0},children:u.map(e=>(0,s.jsxs)("li",{style:{border:"1px solid #ddd",padding:"15px",marginBottom:"10px",borderRadius:"5px",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:"600"},children:e.title}),(0,s.jsx)("p",{style:{margin:"5px 0",color:"#555"},children:e.description.length>150?e.description.slice(0,150)+"...":e.description}),(0,s.jsx)(l(),{href:"/news/".concat(e.slug),style:{color:"#34a853",fontWeight:"bold"},children:"View â†’"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>j(e),style:{marginRight:"10px",background:"#f0ad4e",border:"none",padding:"8px 12px",color:"#fff",borderRadius:"5px",cursor:"pointer"},children:"Edit"}),(0,s.jsx)("button",{onClick:()=>b(e.id),style:{background:"#d9534f",border:"none",padding:"8px 12px",color:"#fff",borderRadius:"5px",cursor:"pointer"},children:"Delete"})]})]},e.id))})]})]}),(0,s.jsx)(a.Z,{})]})}}},function(e){e.O(0,[664,27,888,774,179],function(){return e(e.s=262)}),_N_E=e.O()}]);