(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[10],{802:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/news/paper-print-media/add-paper-print-media",function(){return n(761)}])},761:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(5893),r=n(7294),d=n(1664),a=n.n(d),s=n(5422),l=n(7927);function c(){let[e,t]=(0,r.useState)([]),[n,d]=(0,r.useState)(null),[c,o]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),h=async()=>{try{let e=await fetch("http://localhost:5000/api/paper-print-media"),n=await e.json();t(n)}catch(e){console.error(e),x("Error fetching media")}};(0,r.useEffect)(()=>{h()},[]);let g=async e=>{if(e.preventDefault(),!n&&!c)return x("Please select an image");let t=new FormData;n&&t.append("image",n);try{let e="http://localhost:5000/api/paper-print-media",n="POST";c&&(e+="/".concat(c),n="PUT");let i=await fetch(e,{method:n,body:t}),r=await i.json();i.ok?(x(c?"Media updated!":"Media added!"),d(null),o(""),h()):x(r.message||"Error saving media")}catch(e){console.error(e),x("Error connecting to server")}},u=e=>{o(e.slug),x("Select a new image and submit to update.")},m=async e=>{if(confirm("Are you sure you want to delete this media?"))try{let t=await fetch("http://localhost:5000/api/paper-print-media/".concat(e),{method:"DELETE"}),n=await t.json();t.ok?(x("Media deleted successfully!"),h()):x(n.message||"Error deleting media")}catch(e){console.error(e),x("Error connecting to server")}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{}),(0,i.jsxs)("section",{style:{background:"#f5f5f5",padding:"80px 20px",textAlign:"center"},children:[(0,i.jsx)("h2",{style:{fontSize:"42px",fontWeight:"700",marginBottom:"10px"},children:"Add / Manage Paper Media"}),(0,i.jsxs)("div",{style:{fontSize:"18px"},children:[(0,i.jsx)(a(),{href:"/",style:{color:"#34a853",textDecoration:"none"},children:"Home"})," /"," ",(0,i.jsx)("strong",{children:"Add / Manage Paper Media"})]})]}),(0,i.jsxs)("div",{style:{maxWidth:"400px",margin:"30px auto",padding:"20px",border:"1px solid #ccc",borderRadius:"8px",textAlign:"center"},children:[(0,i.jsx)("h2",{children:c?"Edit Media":"Add Paper Media"}),p&&(0,i.jsx)("p",{style:{color:"green"},children:p}),(0,i.jsxs)("form",{onSubmit:g,children:[(0,i.jsx)("input",{type:"file",accept:"image/*",onChange:e=>d(e.target.files[0]),required:!c}),(0,i.jsxs)("div",{style:{marginTop:"10px"},children:[(0,i.jsx)("button",{type:"submit",style:{padding:"10px 20px"},children:c?"Update Media":"Add Media"}),c&&(0,i.jsx)("button",{type:"button",onClick:()=>{o(""),x(""),d(null)},style:{marginLeft:"10px",padding:"10px 20px"},children:"Cancel"})]})]})]}),(0,i.jsxs)("div",{style:{maxWidth:"800px",margin:"30px auto"},children:[(0,i.jsx)("h3",{children:"All Paper Media"}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px"},children:"Image"}),(0,i.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px"},children:"Created At"}),(0,i.jsx)("th",{style:{border:"1px solid #ccc",padding:"8px"},children:"Actions"})]})}),(0,i.jsxs)("tbody",{children:[0===e.length&&(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:"3",style:{textAlign:"center",padding:"10px"},children:"No media found."})}),e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:e.image&&(0,i.jsx)("img",{src:"http://localhost:5000".concat(e.image),alt:"",style:{maxWidth:"100px",maxHeight:"100px"}})}),(0,i.jsx)("td",{style:{border:"1px solid #ccc",padding:"8px"},children:new Date(e.createdAt).toLocaleString()}),(0,i.jsxs)("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:[(0,i.jsx)("button",{onClick:()=>u(e),style:{marginRight:"10px"},children:"Edit"}),(0,i.jsx)("button",{onClick:()=>m(e.slug),children:"Delete"})]})]},e.slug))]})]})]}),(0,i.jsx)(l.Z,{})]})}}},function(e){e.O(0,[664,27,888,774,179],function(){return e(e.s=802)}),_N_E=e.O()}]);